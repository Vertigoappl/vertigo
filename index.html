import React, { useState, useEffect } from 'react';
import { Mail, Shield, FileText, Menu, X, ArrowRight, Smartphone, Globe, Lock, CheckCircle } from 'lucide-react';

// --- PAGE COMPONENTS ---

const Home = ({ navigateTo }) => {
  const [formStatus, setFormStatus] = useState('idle'); // idle, submitting, success

  const handleSubmit = (e) => {
    e.preventDefault();
    setFormStatus('submitting');
    
    // Simulation of submission
    setTimeout(() => {
      setFormStatus('success');
      // In a real environment, connect to a backend service here.
    }, 1500);
  };

  return (
    <div className="animate-fade-in">
      {/* Hero Section */}
      <section className="bg-slate-900 text-white py-20 px-6">
        <div className="max-w-6xl mx-auto text-center">
          <h1 className="text-4xl md:text-6xl font-bold mb-6 tracking-tight">
            Crafting Extraordinary <span className="text-blue-500">Mobile Experiences</span>
          </h1>
          <button 
            onClick={() => document.getElementById('contact').scrollIntoView({ behavior: 'smooth' })}
            className="bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-full font-medium transition-all flex items-center gap-2 mx-auto mt-10"
          >
            Contact Us <ArrowRight size={18} />
          </button>
        </div>
      </section>

      {/* Services Snippet */}
      <section className="py-16 px-6 bg-slate-50">
        <div className="max-w-6xl mx-auto grid md:grid-cols-3 gap-8">
          <div className="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
            <div className="w-12 h-12 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center mb-4">
              <Smartphone size={24} />
            </div>
            <h3 className="text-xl font-bold mb-2 text-slate-900">Native iOS Development</h3>
            <p className="text-slate-600">Apps optimized for the Apple ecosystem, ensuring the best performance and user experience.</p>
          </div>
          <div className="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
            <div className="w-12 h-12 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center mb-4">
              <Lock size={24} />
            </div>
            <h3 className="text-xl font-bold mb-2 text-slate-900">Privacy First</h3>
            <p className="text-slate-600">We implement the highest security standards and compliance with international regulations.</p>
          </div>
          <div className="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
            <div className="w-12 h-12 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center mb-4">
              <Globe size={24} />
            </div>
            <h3 className="text-xl font-bold mb-2 text-slate-900">Global Reach</h3>
            <p className="text-slate-600">We develop with international scalability in mind, including ad integration and monetization.</p>
          </div>
        </div>
      </section>

      {/* Contact Form Section */}
      <section id="contact" className="py-20 px-6 bg-white">
        <div className="max-w-3xl mx-auto">
          <div className="text-center mb-12">
            <h2 className="text-3xl font-bold text-slate-900 mb-4">Contact Us</h2>
            <p className="text-slate-600">Fill out the form below and we will get back to you as soon as possible.</p>
          </div>

          <div className="bg-slate-50 p-8 rounded-2xl border border-slate-200 shadow-sm">
            {formStatus === 'success' ? (
              <div className="text-center py-12">
                <div className="w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4">
                  <CheckCircle size={32} />
                </div>
                <h3 className="text-2xl font-bold text-slate-900 mb-2">Message Sent!</h3>
                <p className="text-slate-600">Thank you for contacting Vertigo Studio. We will respond shortly.</p>
                <button 
                  onClick={() => setFormStatus('idle')}
                  className="mt-6 text-blue-600 font-medium hover:underline"
                >
                  Send another message
                </button>
              </div>
            ) : (
              <form onSubmit={handleSubmit} className="space-y-6">
                <div className="grid md:grid-cols-2 gap-6">
                  <div>
                    <label className="block text-sm font-medium text-slate-700 mb-2">Name</label>
                    <input 
                      type="text" 
                      required
                      className="w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"
                      placeholder="Your name"
                    />
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-slate-700 mb-2">Email</label>
                    <input 
                      type="email" 
                      required
                      className="w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"
                      placeholder="you@email.com"
                    />
                  </div>
                </div>
                <div>
                  <label className="block text-sm font-medium text-slate-700 mb-2">Message</label>
                  <textarea 
                    rows="4"
                    required
                    className="w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"
                    placeholder="Tell us about your project or inquiry..."
                  ></textarea>
                </div>
                <div className="flex items-center justify-between pt-2">
                  <p className="text-xs text-slate-500">
                    By sending this form you accept our <button type="button" onClick={() => navigateTo('privacy')} className="text-blue-600 hover:underline">Privacy Policy</button>.
                  </p>
                  <button 
                    type="submit" 
                    disabled={formStatus === 'submitting'}
                    className="bg-slate-900 hover:bg-slate-800 text-white px-8 py-3 rounded-lg font-medium transition-all disabled:opacity-70 disabled:cursor-not-allowed"
                  >
                    {formStatus === 'submitting' ? 'Sending...' : 'Send Message'}
                  </button>
                </div>
              </form>
            )}
          </div>
          <div className="text-center mt-8">
            <p className="text-slate-500">Or email us directly at:</p>
            <a href="mailto:contact@vertigosl.com" className="text-blue-600 font-medium text-lg hover:underline">contact@vertigosl.com</a>
          </div>
        </div>
      </section>
    </div>
  );
};

const PrivacyPolicy = () => (
  <div className="max-w-4xl mx-auto py-16 px-6 animate-fade-in">
    <h1 className="text-3xl font-bold text-slate-900 mb-2">Privacy Policy</h1>
    <p className="text-slate-500 mb-8">Last updated: {new Date().toLocaleDateString()}</p>
    
    <div className="prose prose-slate max-w-none space-y-8 text-slate-700">
      <section>
        <h2 className="text-xl font-bold text-slate-900 mb-3">1. Introduction</h2>
        <p>
          At <strong>VERTIGO STUDIO SL</strong> ("we", "our", "us"), we take your privacy seriously. 
          This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our mobile applications and services.
        </p>
      </section>

      <section>
        <h2 className="text-xl font-bold text-slate-900 mb-3">2. Data Collection</h2>
        <p>
          We may collect information about you in a variety of ways. The information we may collect via the Application depends on the content and materials you use, and includes:
        </p>
        <ul className="list-disc pl-5 mt-2 space-y-1">
          <li><strong>Device Data:</strong> Model, OS version, unique identifiers (IDFA/GAID), IP address.</li>
          <li><strong>Usage Data:</strong> App interactions, usage time, crash reports, and diagnostics.</li>
          <li><strong>Location Data:</strong> General location (based on IP) to show relevant content or advertising.</li>
        </ul>
      </section>

      <section>
        <h2 className="text-xl font-bold text-slate-900 mb-3">3. Third-Party Services</h2>
        <p>
          Our applications use third-party services that may collect information used to identify you. 
          Below are the links to the privacy policies of the third-party service providers used by the application:
        </p>
        <div className="grid md:grid-cols-2 gap-4 mt-4">
          {[
            { name: "Google Firebase (Analytics, Crashlytics, Auth)", url: "https://firebase.google.com/policies/analytics" },
            { name: "Google AdMob", url: "https://support.google.com/admob/answer/6128543?hl=es" },
            { name: "AppLovin", url: "https://www.applovin.com/privacy/" },
            { name: "Appsflyer", url: "https://www.appsflyer.com/legal/services-privacy-policy/" },
            { name: "Facebook SDK / Meta Audience Network", url: "https://www.facebook.com/about/privacy/" },
            { name: "RevenueCat", url: "https://www.revenuecat.com/privacy/" }
          ].map((service) => (
            <a key={service.name} href={service.url} target="_blank" rel="noreferrer" className="block p-3 border rounded hover:bg-slate-50 transition-colors text-blue-600 hover:underline text-sm">
              {service.name}
            </a>
          ))}
        </div>
      </section>

      <section>
        <h2 className="text-xl font-bold text-slate-900 mb-3">4. Use of Information</h2>
        <p>We use the collected information to:</p>
        <ul className="list-disc pl-5 mt-2 space-y-1">
          <li>Operate and maintain our applications.</li>
          <li>Improve user experience and fix bugs (Crashlytics).</li>
          <li>Manage in-app purchases and subscriptions (RevenueCat).</li>
          <li>Display relevant advertising and measure marketing campaign effectiveness (AdMob, AppLovin, Appsflyer, Facebook).</li>
        </ul>
      </section>

      <section>
        <h2 className="text-xl font-bold text-slate-900 mb-3">5. Data Security</h2>
        <p>
          We use administrative, technical, and physical security measures to help protect your personal information. 
          However, no transmission over the Internet or mobile network is completely secure.
        </p>
      </section>

      <section>
        <h2 className="text-xl font-bold text-slate-900 mb-3">6. Contact Us</h2>
        <p>
          If you have questions or comments about this Privacy Policy, please contact us at:
        </p>
        <address className="not-italic mt-2 bg-slate-50 p-4 rounded border border-slate-200">
          <strong>VERTIGO STUDIO SL</strong><br/>
          L-717311-A<br/>
          Escaldes Engordany AD700<br/>
          Principality of Andorra<br/>
          Email: <a href="mailto:contact@vertigosl.com" className="text-blue-600">contact@vertigosl.com</a>
        </address>
      </section>
    </div>
  </div>
);

const TermsOfService = () => (
  <div className="max-w-4xl mx-auto py-16 px-6 animate-fade-in">
    <h1 className="text-3xl font-bold text-slate-900 mb-2">Terms of Service</h1>
    <p className="text-slate-500 mb-8">Last updated: {new Date().toLocaleDateString()}</p>
    
    <div className="prose prose-slate max-w-none space-y-8 text-slate-700">
      <section>
        <h2 className="text-xl font-bold text-slate-900 mb-3">1. Acceptance of Terms</h2>
        <p>
          By downloading or using our mobile applications, you agree to be bound by these Terms of Service. If you do not agree to these terms, do not use our applications.
        </p>
      </section>

      <section>
        <h2 className="text-xl font-bold text-slate-900 mb-3">2. License to Use</h2>
        <p>
          VERTIGO STUDIO SL grants you a revocable, non-exclusive, non-transferable, limited license to download, install, and use the application strictly in accordance with these terms.
        </p>
        <p className="mt-2">You agree not to:</p>
        <ul className="list-disc pl-5 mt-1 space-y-1">
          <li>Reverse engineer, decompile, or disassemble the application.</li>
          <li>Use the application for any illegal or unauthorized purpose.</li>
          <li>Attempt to circumvent the technical limitations of the application.</li>
        </ul>
      </section>

      <section>
        <h2 className="text-xl font-bold text-slate-900 mb-3">3. Purchases and Subscriptions</h2>
        <p>
          Some parts of the Service may be paid (subscriptions or in-app purchases). 
          These transactions are processed through the respective app store (Apple App Store) and are subject to their payment terms and conditions. 
          We use <strong>RevenueCat</strong> to manage this infrastructure.
        </p>
      </section>

      <section>
        <h2 className="text-xl font-bold text-slate-900 mb-3">4. Limitation of Liability</h2>
        <p>
          To the maximum extent permitted by applicable law, VERTIGO STUDIO SL shall not be liable for any indirect, incidental, special, consequential, or punitive damages, 
          including without limitation, loss of profits, data, use, goodwill, or other intangible losses.
        </p>
      </section>

      <section>
        <h2 className="text-xl font-bold text-slate-900 mb-3">5. Governing Law</h2>
        <p>
          These Terms shall be governed by and construed in accordance with the laws of the <strong>Principality of Andorra</strong>, without regard to its conflict of law provisions.
        </p>
      </section>

      <section>
        <h2 className="text-xl font-bold text-slate-900 mb-3">6. Changes to Terms</h2>
        <p>
          We reserve the right, at our sole discretion, to modify or replace these Terms at any time. It is your responsibility to review these Terms periodically.
        </p>
      </section>

      <section>
        <h2 className="text-xl font-bold text-slate-900 mb-3">7. Company Information</h2>
        <address className="not-italic mt-2 bg-slate-50 p-4 rounded border border-slate-200">
          <strong>VERTIGO STUDIO SL</strong><br/>
          L-717311-A<br/>
          Escaldes Engordany AD700<br/>
          Principality of Andorra
        </address>
      </section>
    </div>
  </div>
);

// --- MAIN COMPONENT ---

export default function App() {
  const [currentPage, setCurrentPage] = useState('home');
  const [isMenuOpen, setIsMenuOpen] = useState(false);

  // Scroll to top when page changes
  useEffect(() => {
    window.scrollTo(0, 0);
    setIsMenuOpen(false);
  }, [currentPage]);

  const navigateTo = (page) => {
    setCurrentPage(page);
  };

  return (
    <div className="min-h-screen flex flex-col font-sans text-slate-800 bg-white">
      {/* Header */}
      <header className="sticky top-0 z-50 bg-white/95 backdrop-blur-sm border-b border-slate-100">
        <div className="max-w-6xl mx-auto px-6 h-16 flex items-center justify-between">
          {/* Logo */}
          <div 
            onClick={() => navigateTo('home')} 
            className="cursor-pointer font-bold text-xl tracking-wider text-slate-900 flex items-center gap-2"
          >
            <div className="w-8 h-8 bg-slate-900 rounded-lg flex items-center justify-center">
              <span className="text-white text-lg font-bold">V</span>
            </div>
            VERTIGO STUDIO
          </div>

          {/* Desktop Nav */}
          <nav className="hidden md:flex items-center gap-8">
            <button 
              onClick={() => navigateTo('home')}
              className={`text-sm font-medium hover:text-blue-600 transition-colors ${currentPage === 'home' ? 'text-blue-600' : 'text-slate-600'}`}
            >
              Home
            </button>
            <button 
              onClick={() => {
                navigateTo('home');
                setTimeout(() => document.getElementById('contact')?.scrollIntoView({ behavior: 'smooth' }), 100);
              }}
              className="bg-slate-900 hover:bg-slate-800 text-white px-5 py-2 rounded-full text-sm font-medium transition-all"
            >
              Contact Us
            </button>
          </nav>

          {/* Mobile Menu Button */}
          <button 
            className="md:hidden text-slate-900"
            onClick={() => setIsMenuOpen(!isMenuOpen)}
          >
            {isMenuOpen ? <X size={24} /> : <Menu size={24} />}
          </button>
        </div>

        {/* Mobile Nav Dropdown */}
        {isMenuOpen && (
          <div className="md:hidden absolute top-16 left-0 w-full bg-white border-b border-slate-100 p-4 shadow-lg flex flex-col gap-4">
            <button 
              onClick={() => navigateTo('home')}
              className="text-left py-2 px-4 hover:bg-slate-50 rounded-lg font-medium"
            >
              Home
            </button>
            <button 
              onClick={() => navigateTo('privacy')}
              className="text-left py-2 px-4 hover:bg-slate-50 rounded-lg font-medium"
            >
              Privacy Policy
            </button>
            <button 
              onClick={() => navigateTo('terms')}
              className="text-left py-2 px-4 hover:bg-slate-50 rounded-lg font-medium"
            >
              Terms of Service
            </button>
          </div>
        )}
      </header>

      {/* Main Content */}
      <main className="flex-grow">
        {currentPage === 'home' && <Home navigateTo={navigateTo} />}
        {currentPage === 'privacy' && <PrivacyPolicy />}
        {currentPage === 'terms' && <TermsOfService />}
      </main>

      {/* Footer */}
      <footer className="bg-slate-900 text-slate-400 py-12 px-6">
        <div className="max-w-6xl mx-auto grid md:grid-cols-4 gap-8 mb-8">
          <div className="col-span-2">
            <h4 className="text-white font-bold text-lg mb-4">VERTIGO STUDIO SL</h4>
            <p className="mb-2">L-717311-A</p>
            <p>Escaldes Engordany AD700,</p>
            <p>Principality of Andorra</p>
          </div>
          
          <div>
            <h4 className="text-white font-bold mb-4">Legal</h4>
            <ul className="space-y-2">
              <li>
                <button onClick={() => navigateTo('privacy')} className="hover:text-white transition-colors">
                  Privacy Policy
                </button>
              </li>
              <li>
                <button onClick={() => navigateTo('terms')} className="hover:text-white transition-colors">
                  Terms of Service
                </button>
              </li>
            </ul>
          </div>

          <div>
            <h4 className="text-white font-bold mb-4">Contact</h4>
            <ul className="space-y-2">
              <li>
                <a href="mailto:contact@vertigosl.com" className="hover:text-white transition-colors">
                  contact@vertigosl.com
                </a>
              </li>
            </ul>
          </div>
        </div>
        
        <div className="max-w-6xl mx-auto pt-8 border-t border-slate-800 text-sm flex flex-col md:flex-row justify-between items-center gap-4">
          <p>Â© {new Date().getFullYear()} VERTIGO STUDIO SL. All rights reserved.</p>
          <div className="flex gap-4">
             {/* Social icons if needed */}
          </div>
        </div>
      </footer>
    </div>
  );
}
